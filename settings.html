<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Settings - SJMaths</title>
    <link rel="icon" type="image/svg+xml" href="assets/favicon.svg">
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&display=swap"
        rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link rel="stylesheet" href="assets/css/main.css">
    <link rel="stylesheet" href="assets/css/layout.css">
    <link rel="stylesheet" href="assets/css/component.css">
    <link rel="stylesheet" href="assets/css/improved-ui.css">
    <link rel="stylesheet" href="assets/css/dashboard.css">
</head>

<body>
    <header id="header"></header>

    <main>
        <div class="settings-container">
            <div class="settings-section">
                <h2><i class="fas fa-palette"></i> Appearance</h2>
                <div class="form-group">
                    <label>Color Theme</label>
                    <div class="theme-options" id="themeOptions">
                        <div class="theme-btn theme-purple" data-theme="purple" title="Purple"></div>
                        <div class="theme-btn theme-blue" data-theme="blue" title="Blue"></div>
                        <div class="theme-btn theme-green" data-theme="green" title="Green"></div>
                        <div class="theme-btn theme-orange" data-theme="orange" title="Orange"></div>
                    </div>
                </div>
                <div class="form-group">
                    <label>Dark Mode</label>
                    <button id="darkModeToggleBtn" class="btn-save" style="background: #333;">
                        <i class="fas fa-moon"></i> Toggle Dark Mode
                    </button>
                </div>
            </div>

        </div>
    </main>

    <footer id="footer"></footer>

    <script src="utils/loadHeader.js"></script>
    <script src="utils/loadFooter.js"></script>
    <script src="assets/js/main.js"></script>

    <script type="module">
        import { auth } from './assets/js/firebase-config.js';
        import { showToast } from './assets/js/auth.js';

        // Theme Logic
        const themeBtns = document.querySelectorAll('.theme-btn');
        const currentTheme = localStorage.getItem('sjmaths-theme') || 'purple';
        
        // Set active class
        const activeBtn = document.querySelector(`.theme-btn[data-theme="${currentTheme}"]`);
        if (activeBtn) activeBtn.classList.add('active');

        themeBtns.forEach(btn => {
            btn.addEventListener('click', () => {
                const theme = btn.dataset.theme;
                if (window.setTheme) {
                    window.setTheme(theme);
                }
                // Update active state
                themeBtns.forEach(b => b.classList.remove('active'));
                btn.classList.add('active');
                showToast(`Theme changed to ${theme}`, 'success');
            });
        });

        // Dark Mode Logic
        const darkModeBtn = document.getElementById('darkModeToggleBtn');
        darkModeBtn.addEventListener('click', () => {
            const isDark = document.body.classList.toggle('dark-mode');
            localStorage.setItem('sjmaths-dark', isDark ? 'on' : 'off');
            showToast(isDark ? 'Dark mode enabled' : 'Light mode enabled', 'success');
        });

    </script>
</body>
</html>
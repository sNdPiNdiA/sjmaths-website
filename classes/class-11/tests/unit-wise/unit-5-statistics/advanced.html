<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Unit 5: Statistics and Probability (Advanced) | Class 11 Maths</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;700&display=swap" rel="stylesheet">
    
    <!-- Shared Test CSS -->
    <link rel="stylesheet" href="../../../../../assets/css/test-interface.css">
    
    <!-- MathJax -->
    <script>
        window.MathJax = {
            tex: { inlineMath: [['$', '$'], ['\\(', '\\)']] },
            svg: { fontCache: 'global' }
        };
    </script>
    <script id="MathJax-script" async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    <style>
        @media (max-width: 768px) {
            .test-header {
                padding: 0.5rem 1rem;
                height: auto;
                flex-wrap: wrap;
                gap: 10px;
            }
            .logo { font-size: 1rem !important; }
            .timer-badge { font-size: 0.9rem; padding: 4px 10px; }

            .test-container {
                flex-direction: column;
                height: calc(100vh - 120px);
            }
            .question-panel {
                width: 100%;
                flex: 1;
                border-right: none;
                border-bottom: 1px solid #eee;
                overflow-y: auto;
                padding: 15px;
                box-sizing: border-box;
            }
            .nav-panel {
                width: 100%;
                height: auto;
                border-left: none;
                border-top: 1px solid #eee;
                max-height: 40vh;
                overflow-y: auto;
                padding: 1rem;
            }
            #paletteToggle { display: block !important; }
            .nav-panel.collapsed #paletteBody { display: none; }
            .nav-panel.collapsed { flex: 0; }
            .nav-panel.collapsed #paletteToggle i { transform: rotate(180deg); }
            
            .test-footer {
                padding: 10px;
                height: auto;
            }
            .q-text, .solution-div {
                word-wrap: break-word;
                overflow-wrap: anywhere;
                white-space: normal;
                max-width: 100%;
            }
        }
    </style>
</head>
<body>

    <!-- Header -->
    <header class="test-header">
        <div class="logo" style="font-weight: 800; color: var(--test-primary); font-size: 1.2rem;">
            &int; SJMaths <span style="color:#666; font-weight:400;">| Unit 5 (Advanced)</span>
        </div>
        <div class="timer-badge">
            <i class="far fa-clock"></i> <span id="timerDisplay">45:00</span>
        </div>
        <button class="btn-exit" onclick="if(confirm('Quit test?')) window.location.href='../index.html'">
            Exit
        </button>
    </header>

    <!-- Main Layout -->
    <div class="test-container">
        
        <!-- Left: Question Area -->
        <main class="question-panel">
            <div class="section-header" id="qSection">Section A</div>
            
            <div class="q-header">
                <span id="qNumber">Question 1</span>
                <span id="qMarks">(1 Mark)</span>
            </div>

            <div class="q-text" id="qText">
                <!-- Question Content -->
            </div>

            <div id="inputArea">
                <!-- Options or Textarea -->
            </div>

            <div id="solutionArea" class="solution-div">
                <!-- Solution shown after submit -->
            </div>
        </main>

        <!-- Right: Navigation -->
        <aside class="nav-panel">
            <div style="display:flex; align-items:center; margin-bottom:1rem;">
                <h3 style="margin:0; font-size:1rem;">Question Palette</h3>
                <button id="paletteToggle" style="background:none; border:none; color:var(--test-primary, #2c3e50); cursor:pointer; display:none; font-size:1.1rem; margin-left: auto; margin-right: 10px;">
                    <i class="fas fa-chevron-up" style="transition: transform 0.3s;"></i>
                </button>
            </div>
            
            <div id="paletteBody">
                <div class="palette-grid" id="questionPalette">
                    <!-- Buttons generated by JS -->
                </div>
                
                <div style="margin-top: 2rem; font-size: 0.8rem; color: #666;">
                    <div style="display:flex; gap:8px; align-items:center; margin-bottom:5px;">
                        <span style="width:12px; height:12px; background:#27ae60; border-radius:50%;"></span> Answered
                    </div>
                    <div style="display:flex; gap:8px; align-items:center; margin-bottom:5px;">
                        <span style="width:12px; height:12px; background:#c0392b; border-radius:50%;"></span> Visited
                    </div>
                    <div style="display:flex; gap:8px; align-items:center;">
                        <span style="width:12px; height:12px; border:1px solid #ccc; border-radius:50%;"></span> Not Visited
                    </div>
                </div>
            </div>
        </aside>

    </div>

    <!-- Footer -->
    <footer class="test-footer">
        <button class="btn-nav btn-prev" id="btnPrev">Previous</button>
        <button class="btn-nav btn-next" id="btnNext">Next</button>
    </footer>

    <!-- Result Modal -->
    <div class="result-overlay" id="resultModal">
        <div class="result-card">
            <div class="score-circle">
                <div class="score-text"></div>
            </div>
            <div id="resultMessage"></div>
            <button class="btn-nav btn-submit" onclick="closeResult()" style="margin-top:1.5rem;">Review Answers</button>
            <a href="../index.html" style="display:block; margin-top:1rem; color:#666; text-decoration:none;">Back to Dashboard</a>
        </div>
    </div>

    <!-- Test Engine Script -->
    <script src="../../../../../assets/js/test-engine.js"></script>
    <script src="../../../../../assets/js/dark-mode.js"></script>
    
    <!-- Test Data Configuration -->
    <script>
        const testConfig = {
            timeLimit: 45, // 45 Minutes
            exitUrl: '../index.html',
            questions: [
                // --- Section A: MCQs (1 Mark) ---
                { id: 1, type: 'mcq', section: 'Section A', marks: 1, question: "If the coefficient of variation is 60 and the standard deviation is 24, then the arithmetic mean is", options: ["40", "36", "20", "14.4"], finalAnswer: "(a) 40", solutionSteps: ["$CV = \\frac{\\sigma}{\\bar{x}} \\times 100$.", "$60 = \\frac{24}{\\bar{x}} \\times 100$.", "$\\bar{x} = \\frac{2400}{60} = 40$."] },
                { id: 2, type: 'mcq', section: 'Section A', marks: 1, question: "If each observation of a data is increased by 5, then their variance", options: ["Increases by 5", "Increases by 25", "Remains same", "Decreases by 5"], finalAnswer: "(c) Remains same", solutionSteps: ["Variance is independent of change of origin. Adding a constant to all observations does not change the variance."] },
                { id: 3, type: 'mcq', section: 'Section A', marks: 1, question: "If $P(A \\cup B) = 0.8$ and $P(A \\cap B) = 0.3$, then $P(A') + P(B')$ is equal to", options: ["0.3", "0.5", "0.7", "0.9"], finalAnswer: "(d) 0.9", solutionSteps: ["$P(A') + P(B') = (1 - P(A)) + (1 - P(B)) = 2 - (P(A) + P(B))$.", "$P(A) + P(B) = P(A \\cup B) + P(A \\cap B) = 0.8 + 0.3 = 1.1$.", "$2 - 1.1 = 0.9$."] },
                { id: 4, type: 'mcq', section: 'Section A', marks: 1, question: "In a leap year, the probability of having 53 Sundays or 53 Mondays is", options: ["2/7", "3/7", "4/7", "1/7"], finalAnswer: "(b) 3/7", solutionSteps: ["Leap year has 2 extra days. Sample space (7 outcomes): (Sun, Mon), (Mon, Tue), ..., (Sat, Sun).", "53 Sun: (Sat, Sun), (Sun, Mon). 53 Mon: (Sun, Mon), (Mon, Tue).", "Union: (Sat, Sun), (Sun, Mon), (Mon, Tue). Total 3 outcomes.", "Probability = 3/7."] },
                { id: 5, type: 'mcq', section: 'Section A', marks: 1, question: "A letter is chosen at random from the word 'ASSASSINATION'. The probability that it is a vowel is", options: ["6/13", "7/13", "6/11", "7/11"], finalAnswer: "(a) 6/13", solutionSteps: ["Total letters = 13. Vowels: A, A, A, I, A, I, O (6 vowels).", "Probability = 6/13."] },

                // --- Section B: Subjective (2 Marks) ---
                { id: 6, type: 'subjective', section: 'Section B', marks: 2, question: "The mean and variance of 7 observations are 8 and 16 respectively. If 5 of the observations are 2, 4, 10, 12, 14, find the remaining two observations.", finalAnswer: "6, 8", solutionSteps: ["Let remaining be $x, y$. Sum = $7 \\times 8 = 56$.", "$2+4+10+12+14+x+y = 56 \\implies x+y = 14$.", "Variance = $\\frac{\\sum x_i^2}{n} - (\\bar{x})^2 = 16$.", "$\\frac{\\sum x_i^2}{7} - 64 = 16 \\implies \\sum x_i^2 = 7(80) = 560$.", "$4+16+100+144+196+x^2+y^2 = 560 \\implies x^2+y^2 = 100$.", "Solve $x+y=14, x^2+y^2=100$. $x=6, y=8$."] },
                { id: 7, type: 'subjective', section: 'Section B', marks: 2, question: "A bag contains 9 discs of which 4 are red, 3 are blue, and 2 are yellow. A disc is drawn at random. Calculate the probability that it is (i) red or blue, (ii) not blue.", finalAnswer: "(i) 7/9, (ii) 2/3", solutionSteps: ["Total = 9.", "(i) Red or Blue = $4+3=7$. Prob = 7/9.", "(ii) Not Blue = $1 - P(\\text{Blue}) = 1 - 3/9 = 6/9 = 2/3$."] },
                { id: 8, type: 'subjective', section: 'Section B', marks: 2, question: "Find the mean deviation about the median for the data: 13, 17, 16, 14, 11, 13, 10, 16, 11, 18, 12, 17.", finalAnswer: "2.33", solutionSteps: ["Sorted: 10, 11, 11, 12, 13, 13, 14, 16, 16, 17, 17, 18. $n=12$.", "Median = avg(6th, 7th) = $(13+14)/2 = 13.5$.", "Deviations $|x_i - 13.5|$: 3.5, 2.5, 2.5, 1.5, 0.5, 0.5, 0.5, 2.5, 2.5, 3.5, 3.5, 4.5.", "Sum = 28. Mean Deviation = $28/12 \\approx 2.33$."] },

                // --- Section C: Subjective (3 Marks) ---
                { id: 9, type: 'subjective', section: 'Section C', marks: 3, question: "The mean and standard deviation of 100 observations were calculated as 40 and 5.1 respectively by a student who took by mistake 50 instead of 40 for one observation. What are the correct mean and standard deviation?", finalAnswer: "Mean=39.9, SD=5", solutionSteps: ["Wrong Sum = $100 \\times 40 = 4000$. Correct Sum = $4000 - 50 + 40 = 3990$. Correct Mean = 39.9.", "Wrong Variance = $5.1^2 = 26.01$.", "$\\sum x^2 = 100(26.01 + 40^2) = 100(1626.01) = 162601$.", "Correct $\\sum x^2 = 162601 - 50^2 + 40^2 = 162601 - 2500 + 1600 = 161701$.", "Correct Var = $161701/100 - (39.9)^2 = 1617.01 - 1592.01 = 25$.", "Correct SD = $\\sqrt{25} = 5$."] },
                { id: 10, type: 'subjective', section: 'Section C', marks: 3, question: "Two students Anil and Ashima appeared in an examination. The probability that Anil will qualify is 0.05 and that Ashima will qualify is 0.10. The probability that both will qualify is 0.02. Find the probability that (a) Both will not qualify (b) At least one will not qualify (c) Only one will qualify.", finalAnswer: "(a) 0.87, (b) 0.98, (c) 0.11", solutionSteps: ["$P(A)=0.05, P(B)=0.10, P(A \\cap B)=0.02$.", "(a) $P(A' \\cap B') = 1 - P(A \\cup B) = 1 - (0.05+0.10-0.02) = 1 - 0.13 = 0.87$.", "(b) $P(\\text{at least one not}) = 1 - P(A \\cap B) = 1 - 0.02 = 0.98$.", "(c) $P(A \\cup B) - P(A \\cap B) = 0.13 - 0.02 = 0.11$."] },

                // --- Section D: Long Answer (5 Marks) ---
                { id: 11, type: 'subjective', section: 'Section D', marks: 5, question: "Calculate the mean, variance and standard deviation for the following distribution:<br>Class: 30-40, 40-50, 50-60, 60-70, 70-80, 80-90, 90-100<br>Frequency: 3, 7, 12, 15, 8, 3, 2", finalAnswer: "Mean=62, Var=201, SD=14.18", solutionSteps: ["Mid-points ($x_i$): 35, 45, 55, 65, 75, 85, 95.", "Assumed Mean $A=65, h=10$. $u_i$: -3, -2, -1, 0, 1, 2, 3.", "$f_i u_i$: -9, -14, -12, 0, 8, 6, 6. Sum = -15.", "Mean = $65 + (-15/50) \\times 10 = 65 - 3 = 62$.", "$f_i u_i^2$: 27, 28, 12, 0, 8, 12, 18. Sum = 105.", "Variance = $100 [\\frac{105}{50} - (\\frac{-15}{50})^2] = 100 [2.1 - 0.09] = 201$.", "SD = $\\sqrt{201} \\approx 14.18$."] },

                // --- Section E: Case Study (4 Marks) ---
                { id: 12, type: 'subjective', section: 'Section E', marks: 4, question: "<strong>Case Study:</strong> A committee of 4 students is selected at random from a group consisting of 8 boys and 4 girls.<br>(i) Find the probability that there are exactly 2 girls in the committee.<br>(ii) Find the probability that there is at least 1 girl in the committee.<br>(iii) Find the probability that there are at most 2 girls in the committee.", finalAnswer: "(i) 28/55, (ii) 48/55, (iii) 54/55", solutionSteps: ["Total ways to select 4 from 12 = $^{12}C_4 = 495$.", "(i) 2 Girls, 2 Boys: $^4C_2 \\times ^8C_2 = 6 \\times 28 = 168$. Prob = $168/495 = 56/165$ (Wait, $168/495 = 56/165$). Let's recheck calculation. $12C4 = 495$. $6 \\times 28 = 168$. $168/495 = 56/165$.", "(ii) At least 1 girl = Total - No girl. No girl (4 Boys) = $^8C_4 = 70$. Prob = $1 - 70/495 = 425/495 = 85/99$.", "(iii) At most 2 girls = 0G, 1G, 2G. 0G=70. 1G=$^4C_1 \\times ^8C_3 = 4 \\times 56 = 224$. 2G=168. Sum = $70+224+168 = 462$. Prob = $462/495 = 14/15$."] }
            ]
        };

        document.addEventListener('DOMContentLoaded', () => {
            new TestEngine(testConfig);

            // Mobile Palette Toggle
            const toggleBtn = document.getElementById('paletteToggle');
            const navPanel = document.querySelector('.nav-panel');
            
            if(toggleBtn && navPanel) {
                toggleBtn.addEventListener('click', () => {
                    navPanel.classList.toggle('collapsed');
                });
            }
        });
    </script>
</body>
</html>
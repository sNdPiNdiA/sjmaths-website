<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Unit 3 Test: Calculus (Standard) | Class 12 Maths</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;700&display=swap" rel="stylesheet">
    
    <!-- Shared Test CSS -->
    <link rel="stylesheet" href="../../../../../assets/css/test-interface.css">
    
    <!-- MathJax -->
    <script>
        window.MathJax = {
            tex: { inlineMath: [['$', '$'], ['\\(', '\\)']] },
            svg: { fontCache: 'global' }
        };
    </script>
    <script id="MathJax-script" async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    <style>
        @media (max-width: 768px) {
            #paletteToggle { display: block !important; }
            .nav-panel.collapsed #paletteBody { display: none; }
            .nav-panel.collapsed #paletteToggle i { transform: rotate(180deg); }
        }
    </style>
</head>
<body>

    <!-- Header -->
    <header class="test-header">
        <div class="logo" style="font-weight: 800; color: var(--test-primary); font-size: 1.2rem;">
            &int; SJMaths <span style="color:#666; font-weight:400;">| Unit 3 Test (Standard)</span>
        </div>
        <div class="timer-badge">
            <i class="far fa-clock"></i> <span id="timerDisplay">60:00</span>
        </div>
        <button class="btn-exit" onclick="if(confirm('Quit test?')) window.location.href='../../index.html'">
            Exit
        </button>
    </header>

    <!-- Main Layout -->
    <div class="test-container">
        
        <!-- Left: Question Area -->
        <main class="question-panel">
            <div class="section-header" id="qSection">Section A</div>
            
            <div class="q-header">
                <span id="qNumber">Question 1</span>
                <span id="qMarks">(1 Mark)</span>
            </div>

            <div class="q-text" id="qText">
                <!-- Question Content -->
            </div>

            <div id="inputArea">
                <!-- Options or Textarea -->
            </div>

            <div id="solutionArea" class="solution-div">
                <!-- Solution shown after submit -->
            </div>
        </main>

        <!-- Right: Navigation -->
        <aside class="nav-panel">
            <div style="display:flex; justify-content:space-between; align-items:center; margin-bottom:1rem;">
                <h3 style="margin:0; font-size:1rem;">Question Palette</h3>
                <button id="paletteToggle" style="background:none; border:none; color:var(--test-primary, #2c3e50); cursor:pointer; display:none; font-size:1.1rem;">
                    <i class="fas fa-chevron-up" style="transition: transform 0.3s;"></i>
                </button>
            </div>
            
            <div id="paletteBody">
                <div class="palette-grid" id="questionPalette">
                    <!-- Buttons generated by JS -->
                </div>
                
                <div style="margin-top: 2rem; font-size: 0.8rem; color: #666;">
                    <div style="display:flex; gap:8px; align-items:center; margin-bottom:5px;">
                        <span style="width:12px; height:12px; background:#27ae60; border-radius:50%;"></span> Answered
                    </div>
                    <div style="display:flex; gap:8px; align-items:center; margin-bottom:5px;">
                        <span style="width:12px; height:12px; background:#c0392b; border-radius:50%;"></span> Visited
                    </div>
                    <div style="display:flex; gap:8px; align-items:center;">
                        <span style="width:12px; height:12px; border:1px solid #ccc; border-radius:50%;"></span> Not Visited
                    </div>
                </div>
            </div>
        </aside>

    </div>

    <!-- Footer -->
    <footer class="test-footer">
        <button class="btn-nav btn-prev" id="btnPrev">Previous</button>
        <button class="btn-nav btn-next" id="btnNext">Next</button>
    </footer>

    <!-- Result Modal -->
    <div class="result-overlay" id="resultModal">
        <div class="result-card">
            <div class="score-circle">
                <div class="score-text"></div>
            </div>
            <div id="resultMessage"></div>
            <button class="btn-nav btn-submit" onclick="closeResult()" style="margin-top:1.5rem;">Review Answers</button>
            <a href="../../index.html" style="display:block; margin-top:1rem; color:#666; text-decoration:none;">Back to Dashboard</a>
        </div>
    </div>

    <!-- Test Engine Script -->
    <script src="../../../../../assets/js/test-engine.js"></script>
    <script src="../../../../../assets/js/test-dark-mode.js"></script>
    
    <!-- Test Data Configuration -->
    <script>
        const testConfig = {
            timeLimit: 60, // 1 Hour
            exitUrl: '../../index.html',
            questions: [
                // --- Section A: MCQs (1 Mark) ---
                { id: 1, type: 'mcq', section: 'Section A', marks: 1, question: "The value of $\\int e^x (\\frac{1}{x} - \\frac{1}{x^2}) dx$ is", options: ["$e^x/x + C$", "$-e^x/x^2 + C$", "$e^x \\log x + C$", "$e^x/x^2 + C$"], finalAnswer: "(a) $e^x/x + C$", solutionSteps: ["Form $\\int e^x (f(x) + f'(x)) dx = e^x f(x)$.", "Here $f(x) = 1/x$, so $f'(x) = -1/x^2$."] },
                { id: 2, type: 'mcq', section: 'Section A', marks: 1, question: "If $y = \\log(\\log x)$, then $\\frac{dy}{dx}$ is", options: ["$1/(x \\log x)$", "$1/\\log x$", "$1/x$", "$\\log x/x$"], finalAnswer: "(a) $1/(x \\log x)$", solutionSteps: ["Chain rule: $\\frac{d}{dx}(\\log(\\log x)) = \\frac{1}{\\log x} \\cdot \\frac{d}{dx}(\\log x) = \\frac{1}{\\log x} \\cdot \\frac{1}{x}$."] },
                { id: 3, type: 'mcq', section: 'Section A', marks: 1, question: "The degree of the differential equation $(\\frac{d^2y}{dx^2})^2 + \\cos(\\frac{dy}{dx}) = 0$ is", options: ["2", "1", "Not defined", "0"], finalAnswer: "(c) Not defined", solutionSteps: ["The equation is not a polynomial in its derivatives due to the term $\\cos(dy/dx)$."] },
                { id: 4, type: 'mcq', section: 'Section A', marks: 1, question: "The rate of change of the volume of a sphere with respect to its radius when $r=2$ cm is", options: ["$16\\pi$", "$8\\pi$", "$4\\pi$", "$2\\pi$"], finalAnswer: "(a) $16\\pi$", solutionSteps: ["$V = \\frac{4}{3}\\pi r^3$.", "$\\frac{dV}{dr} = 4\\pi r^2$.", "At $r=2$, Rate = $4\\pi(4) = 16\\pi$."] },
                { id: 5, type: 'mcq', section: 'Section A', marks: 1, question: "The value of $\\int_0^1 \\frac{1}{1+x^2} dx$ is", options: ["$\\pi/4$", "$\\pi/2$", "$\\pi$", "1"], finalAnswer: "(a) $\\pi/4$", solutionSteps: ["$\\int \\frac{1}{1+x^2} dx = \\tan^{-1}x$.", "$[\\tan^{-1}x]_0^1 = \\tan^{-1}(1) - \\tan^{-1}(0) = \\pi/4$."] },

                // --- Section B: Subjective (2 Marks) ---
                { id: 6, type: 'subjective', section: 'Section B', marks: 2, question: "Find $\\frac{dy}{dx}$ if $x^y = y^x$.", finalAnswer: "$\\frac{y(y - x \\log y)}{x(x - y \\log x)}$", solutionSteps: ["Take log on both sides: $y \\log x = x \\log y$.", "Differentiate: $y \\cdot \\frac{1}{x} + \\log x \\cdot y' = x \\cdot \\frac{1}{y} y' + \\log y$.", "$y'(\\log x - \\frac{x}{y}) = \\log y - \\frac{y}{x}$.", "$y'(\\frac{y \\log x - x}{y}) = \\frac{x \\log y - y}{x}$.", "$y' = \\frac{y(x \\log y - y)}{x(y \\log x - x)}$."] },
                { id: 7, type: 'subjective', section: 'Section B', marks: 2, question: "Evaluate $\\int \\frac{\\sin x}{(1+\\cos x)^2} dx$.", finalAnswer: "$\\frac{1}{1+\\cos x} + C$", solutionSteps: ["Put $1+\\cos x = t \\implies -\\sin x dx = dt$.", "$\\int \\frac{-dt}{t^2} = -(-1/t) = 1/t$.", "Substitute back: $\\frac{1}{1+\\cos x} + C$."] },
                { id: 8, type: 'subjective', section: 'Section B', marks: 2, question: "Find the general solution of the differential equation $\\frac{dy}{dx} = \\frac{1+y^2}{1+x^2}$.", finalAnswer: "$y-x = C(1+xy)$ or $\\tan^{-1}y - \\tan^{-1}x = C$", solutionSteps: ["$\\int \\frac{dy}{1+y^2} = \\int \\frac{dx}{1+x^2}$.", "$\\tan^{-1}y = \\tan^{-1}x + C$."] },

                // --- Section C: Subjective (3 Marks) ---
                { id: 9, type: 'subjective', section: 'Section C', marks: 3, question: "Find the particular solution of the differential equation $\\frac{dy}{dx} + y \\cot x = 4x \\csc x$, given that $y=0$ when $x=\\pi/2$.", finalAnswer: "$y = 2x^2 \\csc x - \\frac{\\pi^2}{2} \\csc x$", solutionSteps: ["Linear DE: $P = \\cot x, Q = 4x \\csc x$.", "I.F. = $e^{\\int \\cot x dx} = \\sin x$.", "$y \\sin x = \\int 4x \\csc x \\sin x dx = \\int 4x dx = 2x^2 + C$.", "At $x=\\pi/2, y=0: 0 = 2(\\pi^2/4) + C \\implies C = -\\pi^2/2$.", "$y \\sin x = 2x^2 - \\pi^2/2$."] },
                { id: 10, type: 'subjective', section: 'Section C', marks: 3, question: "Find the area of the region bounded by the parabola $y^2 = 4x$ and the line $x = 3$.", finalAnswer: "$8\\sqrt{3}$ sq units", solutionSteps: ["Symmetric about x-axis.", "Area = $2 \\int_0^3 \\sqrt{4x} dx = 4 \\int_0^3 x^{1/2} dx$.", "$= 4 [\\frac{2}{3} x^{3/2}]_0^3 = \\frac{8}{3} (3\\sqrt{3}) = 8\\sqrt{3}$."] },
                { id: 11, type: 'subjective', section: 'Section C', marks: 3, question: "Find the intervals in which the function $f(x) = 4x^3 - 6x^2 - 72x + 30$ is strictly decreasing.", finalAnswer: "$(-2, 3)$", solutionSteps: ["$f'(x) = 12x^2 - 12x - 72 = 12(x^2 - x - 6)$.", "$f'(x) = 12(x-3)(x+2)$.", "For decreasing, $f'(x) < 0$.", "Interval is $(-2, 3)$."] },

                // --- Section D: Long Answer (5 Marks) ---
                { id: 12, type: 'subjective', section: 'Section D', marks: 5, question: "Show that the semi-vertical angle of the cone of the maximum volume and of given slant height is $\\tan^{-1}\\sqrt{2}$.", finalAnswer: "Proof", solutionSteps: ["Let slant height $l$ (constant), height $h$, radius $r$. $r^2 + h^2 = l^2$.", "Volume $V = \\frac{1}{3}\\pi r^2 h = \\frac{1}{3}\\pi (l^2-h^2)h = \\frac{1}{3}\\pi (l^2h - h^3)$.", "$\\frac{dV}{dh} = \\frac{\\pi}{3}(l^2 - 3h^2)$. For max, $l^2 = 3h^2 \\implies h = l/\\sqrt{3}$.", "$r^2 = l^2 - l^2/3 = 2l^2/3 \\implies r = l\\sqrt{2}/\\sqrt{3}$.", "$\\tan \\alpha = r/h = \\frac{l\\sqrt{2}/\\sqrt{3}}{l/\\sqrt{3}} = \\sqrt{2}$.", "$\\alpha = \\tan^{-1}\\sqrt{2}$."] }
            ]
        };

        document.addEventListener('DOMContentLoaded', () => {
            new TestEngine(testConfig);

            // Mobile Palette Toggle
            const toggleBtn = document.getElementById('paletteToggle');
            const navPanel = document.querySelector('.nav-panel');
            
            if(toggleBtn && navPanel) {
                toggleBtn.addEventListener('click', () => {
                    navPanel.classList.toggle('collapsed');
                });
            }
        });
    </script>
</body>
</html>
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Test: Integrals (Hard) | Class 12 Maths</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;700&display=swap" rel="stylesheet">
    
    <!-- Shared Test CSS -->
    <link rel="stylesheet" href="../../../../../assets/css/test-interface.css">
    
    <!-- MathJax -->
    <script>
        window.MathJax = {
            tex: { inlineMath: [['$', '$'], ['\\(', '\\)']] },
            svg: { fontCache: 'global' }
        };
    </script>
    <script id="MathJax-script" async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
</head>
<body>

    <!-- Header -->
    <header class="test-header">
        <div class="logo" style="font-weight: 800; color: var(--test-primary); font-size: 1.2rem;">
            &int; SJMaths <span style="color:#666; font-weight:400;">| Integrals (Hard)</span>
        </div>
        <div class="timer-badge">
            <i class="far fa-clock"></i> <span id="timerDisplay">45:00</span>
        </div>
        <button class="btn-exit" onclick="if(confirm('Quit test?')) window.location.href='../../index.html'">
            Exit
        </button>
    </header>

    <!-- Main Layout -->
    <div class="test-container">
        
        <!-- Left: Question Area -->
        <main class="question-panel">
            <div class="section-header" id="qSection">Section A</div>
            
            <div class="q-header">
                <span id="qNumber">Question 1</span>
                <span id="qMarks">(1 Mark)</span>
            </div>

            <div class="q-text" id="qText">
                <!-- Question Content -->
            </div>

            <div id="inputArea">
                <!-- Options or Textarea -->
            </div>

            <div id="solutionArea" class="solution-div">
                <!-- Solution shown after submit -->
            </div>
        </main>

        <!-- Right: Navigation -->
        <aside class="nav-panel">
            <h3 style="margin:0 0 1rem 0; font-size:1rem;">Question Palette</h3>
            <div class="palette-grid" id="questionPalette">
                <!-- Buttons generated by JS -->
            </div>
            
            <div style="margin-top: 2rem; font-size: 0.8rem; color: #666;">
                <div style="display:flex; gap:8px; align-items:center; margin-bottom:5px;">
                    <span style="width:12px; height:12px; background:#27ae60; border-radius:50%;"></span> Answered
                </div>
                <div style="display:flex; gap:8px; align-items:center; margin-bottom:5px;">
                    <span style="width:12px; height:12px; background:#c0392b; border-radius:50%;"></span> Visited
                </div>
                <div style="display:flex; gap:8px; align-items:center;">
                    <span style="width:12px; height:12px; border:1px solid #ccc; border-radius:50%;"></span> Not Visited
                </div>
            </div>
        </aside>

    </div>

    <!-- Footer -->
    <footer class="test-footer">
        <button class="btn-nav btn-prev" id="btnPrev">Previous</button>
        <button class="btn-nav btn-next" id="btnNext">Next</button>
    </footer>

    <!-- Result Modal -->
    <div class="result-overlay" id="resultModal">
        <div class="result-card">
            <div class="score-circle">
                <div class="score-text"></div>
            </div>
            <div id="resultMessage"></div>
            <button class="btn-nav btn-submit" onclick="closeResult()" style="margin-top:1.5rem;">Review Answers</button>
            <a href="../../index.html" style="display:block; margin-top:1rem; color:#666; text-decoration:none;">Back to Dashboard</a>
        </div>
    </div>

    <!-- Test Engine Script -->
    <script src="../../../../../assets/js/test-engine.js"></script>
    
    <!-- Test Data Configuration -->
    <script>
        const testConfig = {
            timeLimit: 45, // Minutes
            exitUrl: '../../index.html',
            questions: [
                // Section A: MCQs (1 Mark)
                { id: 1, type: 'mcq', section: 'Section A', marks: 1, question: "The value of $\\int e^x \\left(\\frac{1-\\sin x}{1-\\cos x}\\right) dx$ is", options: ["$-e^x \\tan(x/2) + C$", "$e^x \\tan(x/2) + C$", "$-e^x \\cot(x/2) + C$", "$e^x \\cot(x/2) + C$"], finalAnswer: "(c) $-e^x \\cot(x/2) + C$", solutionSteps: ["$\\frac{1-\\sin x}{1-\\cos x} = \\frac{1-2\\sin(x/2)\\cos(x/2)}{2\\sin^2(x/2)} = \\frac{1}{2}\\csc^2(x/2) - \\cot(x/2)$.", "Let $f(x) = -\\cot(x/2)$, then $f'(x) = \\frac{1}{2}\\csc^2(x/2)$.", "Form is $\\int e^x(f(x)+f'(x))dx = e^xf(x)$."] },
                { id: 2, type: 'mcq', section: 'Section A', marks: 1, question: "$\\int \\frac{dx}{x(x^n+1)}$ is equal to", options: ["$\\frac{1}{n} \\log(\\frac{x^n}{x^n+1}) + C$", "$\\frac{1}{n} \\log(\\frac{x^n+1}{x^n}) + C$", "$\\log(\\frac{x^n}{x^n+1}) + C$", "None of these"], finalAnswer: "(a) $\\frac{1}{n} \\log(\\frac{x^n}{x^n+1}) + C$", solutionSteps: ["Multiply num and den by $x^{n-1}$.", "$\\int \\frac{x^{n-1}}{x^n(x^n+1)} dx$. Put $x^n=t$.", "$\\frac{1}{n} \\int \\frac{dt}{t(t+1)} = \\frac{1}{n} \\int (\\frac{1}{t} - \\frac{1}{t+1}) dt$."] },
                { id: 3, type: 'mcq', section: 'Section A', marks: 1, question: "The value of $\\int_{-\\pi/2}^{\\pi/2} (x^3 + x\\cos x + \\tan^5 x + 1) dx$ is", options: ["0", "2", "$\\pi$", "1"], finalAnswer: "(c) $\\pi$", solutionSteps: ["Let $f(x) = x^3 + x\\cos x + \\tan^5 x$.", "$f(-x) = -x^3 - x\\cos x - \\tan^5 x = -f(x)$. Odd function.", "$\\int_{-\\pi/2}^{\\pi/2} f(x) dx = 0$.", "Remaining part: $\\int_{-\\pi/2}^{\\pi/2} 1 dx = [x]_{-\\pi/2}^{\\pi/2} = \\pi$."] },
                { id: 4, type: 'mcq', section: 'Section A', marks: 1, question: "Evaluate $\\int \\frac{1}{\\cos(x-a)\\cos(x-b)} dx$.", options: ["$\\frac{1}{\\sin(a-b)} \\log|\\frac{\\cos(x-a)}{\\cos(x-b)}| + C$", "$\\frac{1}{\\sin(a-b)} \\log|\\frac{\\cos(x-b)}{\\cos(x-a)}| + C$", "$\\frac{1}{\\sin(a-b)} \\log|\\frac{\\sin(x-a)}{\\sin(x-b)}| + C$", "None"], finalAnswer: "(a) $\\frac{1}{\\sin(a-b)} \\log|\\frac{\\cos(x-a)}{\\cos(x-b)}| + C$", solutionSteps: ["Multiply/divide by $\\sin(a-b) = \\sin((x-b)-(x-a))$.", "Numerator becomes $\\sin(x-b)\\cos(x-a) - \\cos(x-b)\\sin(x-a)$.", "Integrand: $\\tan(x-b) - \\tan(x-a)$.", "Integral: $-\\log|\\cos(x-b)| + \\log|\\cos(x-a)| = \\log|\\frac{\\cos(x-a)}{\\cos(x-b)}|$."] },

                // Section B: Subjective (2 Marks)
                { id: 5, type: 'subjective', section: 'Section B', marks: 2, question: "Evaluate $\\int \\frac{\\cos 2x - \\cos 2\\alpha}{\\cos x - \\cos \\alpha} dx$.", finalAnswer: "$2(x \\cos \\alpha + \\sin x) + C$", solutionSteps: ["$\\cos 2x - \\cos 2\\alpha = 2\\cos^2 x - 1 - (2\\cos^2 \\alpha - 1) = 2(\\cos^2 x - \\cos^2 \\alpha)$.", "Numerator = $2(\\cos x - \\cos \\alpha)(\\cos x + \\cos \\alpha)$.", "Integrand becomes $2(\\cos x + \\cos \\alpha)$.", "Integral = $2(\\sin x + x \\cos \\alpha) + C$."] },
                { id: 6, type: 'subjective', section: 'Section B', marks: 2, question: "Evaluate $\\int_0^{\\pi/2} \\frac{\\sin^{3/2} x}{\\sin^{3/2} x + \\cos^{3/2} x} dx$.", finalAnswer: "$\\frac{\\pi}{4}$", solutionSteps: ["Use property $\\int_0^a f(x) dx = \\int_0^a f(a-x) dx$.", "$I = \\int \\frac{\\cos^{3/2}}{\\cos^{3/2} + \\sin^{3/2}}$.", "$2I = \\int_0^{\\pi/2} 1 dx = \\frac{\\pi}{2}$.", "$I = \\frac{\\pi}{4}$."] },

                // Section C: Long Answer (4-5 Marks)
                { id: 7, type: 'subjective', section: 'Section C', marks: 4, question: "Evaluate $\\int (\\sqrt{\\tan x} + \\sqrt{\\cot x}) dx$.", finalAnswer: "$\\sqrt{2} \\sin^{-1}(\\sin x - \\cos x) + C$", solutionSteps: ["$\\sqrt{\\tan x} + \\frac{1}{\\sqrt{\\tan x}} = \\frac{\\tan x + 1}{\\sqrt{\\tan x}} = \\frac{\\sin x + \\cos x}{\\sqrt{\\sin x \\cos x}}$.", "Multiply num/den by $\\sqrt{2}$: $\\sqrt{2} \\frac{\\sin x + \\cos x}{\\sqrt{2\\sin x \\cos x}} = \\sqrt{2} \\frac{\\sin x + \\cos x}{\\sqrt{1 - (1-2\\sin x \\cos x)}} = \\sqrt{2} \\frac{\\sin x + \\cos x}{\\sqrt{1 - (\\sin x - \\cos x)^2}}$.", "Put $\\sin x - \\cos x = t$, then $(\\cos x + \\sin x)dx = dt$.", "$\\sqrt{2} \\int \\frac{dt}{\\sqrt{1-t^2}} = \\sqrt{2} \\sin^{-1} t$."] },
                { id: 8, type: 'subjective', section: 'Section C', marks: 5, question: "Evaluate $\\int_0^\\pi \\frac{x}{1+\\sin x} dx$.", finalAnswer: "$\\pi$", solutionSteps: ["$I = \\int_0^\\pi \\frac{\\pi - x}{1+\\sin(\\pi-x)} dx = \\int \\frac{\\pi - x}{1+\\sin x}$.", "$2I = \\pi \\int_0^\\pi \\frac{1}{1+\\sin x} dx = \\pi \\int_0^\\pi \\frac{1-\\sin x}{\\cos^2 x} dx$.", "$2I = \\pi \\int_0^\\pi (\\sec^2 x - \\sec x \\tan x) dx = \\pi [\\tan x - \\sec x]_0^\\pi$.", "$2I = \\pi [ (0 - (-1)) - (0 - 1) ] = \\pi [1 + 1] = 2\\pi$.", "$I = \\pi$."] },

                // Section D: Case Study
                { id: 9, type: 'subjective', section: 'Section D', marks: 4, question: "<strong>Case Study:</strong> Integration is the process of finding the antiderivative of a function. A specific definite integral is given by $I = \\int_0^{\\pi/2} \\log(\\sin x) dx$.<br>(i) Show that $\\int_0^{\\pi/2} \\log(\\sin x) dx = \\int_0^{\\pi/2} \\log(\\cos x) dx$.<br>(ii) Find the value of $I$.", finalAnswer: "(i) Property P4, (ii) $-\\frac{\\pi}{2} \\log 2$", solutionSteps: ["(i) Use $\\int_0^a f(x) dx = \\int_0^a f(a-x) dx$. $\\sin(\\pi/2 - x) = \\cos x$.", "(ii) $2I = \\int_0^{\\pi/2} \\log(\\sin x \\cos x) dx = \\int_0^{\\pi/2} (\\log(\\sin 2x) - \\log 2) dx$.", "$\\int_0^{\\pi/2} \\log(\\sin 2x) dx$. Put $2x=t$. Limits 0 to $\\pi$.", "$\\frac{1}{2} \\int_0^\\pi \\log(\\sin t) dt = \\frac{1}{2} \\cdot 2 \\int_0^{\\pi/2} \\log(\\sin t) dt = I$.", "$2I = I - \\int_0^{\\pi/2} \\log 2 dx = I - \\frac{\\pi}{2} \\log 2$.", "$I = -\\frac{\\pi}{2} \\log 2$."] }
            ]
        };

        document.addEventListener('DOMContentLoaded', () => {
            new TestEngine(testConfig);
        });
    </script>
</body>
</html>
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Test: Differential Equations | Class 12 Maths</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;700&display=swap" rel="stylesheet">
    
    <!-- Shared Test CSS -->
    <link rel="stylesheet" href="../../../../../assets/css/test-interface.css">
    
    <!-- MathJax -->
    <script>
        window.MathJax = {
            tex: { inlineMath: [['$', '$'], ['\\(', '\\)']] },
            svg: { fontCache: 'global' }
        };
    </script>
    <script id="MathJax-script" async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
</head>
<body>

    <!-- Header -->
    <header class="test-header">
        <div class="logo" style="font-weight: 800; color: var(--test-primary); font-size: 1.2rem;">
            &int; SJMaths <span style="color:#666; font-weight:400;">| Diff. Equations</span>
        </div>
        <div class="timer-badge">
            <i class="far fa-clock"></i> <span id="timerDisplay">45:00</span>
        </div>
        <button class="btn-exit" onclick="if(confirm('Quit test?')) window.location.href='../../index.html'">
            Exit
        </button>
    </header>

    <!-- Main Layout -->
    <div class="test-container">
        
        <!-- Left: Question Area -->
        <main class="question-panel">
            <div class="section-header" id="qSection">Section A</div>
            
            <div class="q-header">
                <span id="qNumber">Question 1</span>
                <span id="qMarks">(1 Mark)</span>
            </div>

            <div class="q-text" id="qText">
                <!-- Question Content -->
            </div>

            <div id="inputArea">
                <!-- Options or Textarea -->
            </div>

            <div id="solutionArea" class="solution-div">
                <!-- Solution shown after submit -->
            </div>
        </main>

        <!-- Right: Navigation -->
        <aside class="nav-panel">
            <h3 style="margin:0 0 1rem 0; font-size:1rem;">Question Palette</h3>
            <div class="palette-grid" id="questionPalette">
                <!-- Buttons generated by JS -->
            </div>
            
            <div style="margin-top: 2rem; font-size: 0.8rem; color: #666;">
                <div style="display:flex; gap:8px; align-items:center; margin-bottom:5px;">
                    <span style="width:12px; height:12px; background:#27ae60; border-radius:50%;"></span> Answered
                </div>
                <div style="display:flex; gap:8px; align-items:center; margin-bottom:5px;">
                    <span style="width:12px; height:12px; background:#c0392b; border-radius:50%;"></span> Visited
                </div>
                <div style="display:flex; gap:8px; align-items:center;">
                    <span style="width:12px; height:12px; border:1px solid #ccc; border-radius:50%;"></span> Not Visited
                </div>
            </div>
        </aside>

    </div>

    <!-- Footer -->
    <footer class="test-footer">
        <button class="btn-nav btn-prev" id="btnPrev">Previous</button>
        <button class="btn-nav btn-next" id="btnNext">Next</button>
    </footer>

    <!-- Result Modal -->
    <div class="result-overlay" id="resultModal">
        <div class="result-card">
            <div class="score-circle">
                <div class="score-text"></div>
            </div>
            <div id="resultMessage"></div>
            <button class="btn-nav btn-submit" onclick="closeResult()" style="margin-top:1.5rem;">Review Answers</button>
            <a href="../../index.html" style="display:block; margin-top:1rem; color:#666; text-decoration:none;">Back to Dashboard</a>
        </div>
    </div>

    <!-- Test Engine Script -->
    <script src="../../../../../assets/js/test-engine.js"></script>
    
    <!-- Test Data Configuration -->
    <script>
        const testConfig = {
            timeLimit: 45, // Minutes
            exitUrl: '../../index.html',
            questions: [
                // Section A: MCQs (1 Mark)
                { id: 1, type: 'mcq', section: 'Section A', marks: 1, question: "The order and degree of the differential equation $\\frac{d^2y}{dx^2} + \\left(\\frac{dy}{dx}\\right)^3 + y = 0$ are respectively", options: ["2, 3", "2, 1", "1, 2", "1, 3"], finalAnswer: "(b) 2, 1", solutionSteps: ["Order is the highest derivative: $\\frac{d^2y}{dx^2}$ (Order 2).", "Degree is the power of the highest derivative: 1."] },
                { id: 2, type: 'mcq', section: 'Section A', marks: 1, question: "The integrating factor of the differential equation $\\frac{dy}{dx} + y \\tan x = \\sec x$ is", options: ["$\\cos x$", "$\\sec x$", "$\\tan x$", "$e^{\\tan x}$"], finalAnswer: "(b) $\\sec x$", solutionSteps: ["This is a linear DE of form $\\frac{dy}{dx} + Py = Q$.", "Here $P = \\tan x$.", "I.F. = $e^{\\int P dx} = e^{\\int \\tan x dx} = e^{\\log \\sec x} = \\sec x$."] },
                { id: 3, type: 'mcq', section: 'Section A', marks: 1, question: "The number of arbitrary constants in the general solution of a differential equation of fourth order is", options: ["0", "2", "3", "4"], finalAnswer: "(d) 4", solutionSteps: ["The number of arbitrary constants in the general solution is equal to the order of the differential equation."] },
                { id: 4, type: 'mcq', section: 'Section A', marks: 1, question: "The general solution of the differential equation $\\frac{dy}{dx} = e^{x+y}$ is", options: ["$e^x + e^{-y} = C$", "$e^x - e^{-y} = C$", "$e^x + e^y = C$", "$e^{-x} + e^y = C$"], finalAnswer: "(a) $e^x + e^{-y} = C$", solutionSteps: ["$\\frac{dy}{dx} = e^x \\cdot e^y$.", "Separating variables: $e^{-y} dy = e^x dx$.", "Integrating: $-e^{-y} = e^x + C_1$.", "$e^x + e^{-y} = C$."] },

                // Section B: VSA (1 Mark)
                { id: 5, type: 'subjective', section: 'Section B', marks: 1, question: "Find the general solution of the differential equation $\\frac{dy}{dx} = x^3 - 3$.", finalAnswer: "$y = \\frac{x^4}{4} - 3x + C$", solutionSteps: ["$dy = (x^3 - 3) dx$.", "Integrating both sides: $y = \\frac{x^4}{4} - 3x + C$."] },
                { id: 6, type: 'subjective', section: 'Section B', marks: 1, question: "Write the degree of the differential equation $x \\left(\\frac{d^2y}{dx^2}\\right)^3 + y \\left(\\frac{dy}{dx}\\right)^4 + y^2 = 0$.", finalAnswer: "3", solutionSteps: ["Highest order derivative is $\\frac{d^2y}{dx^2}$.", "Its power is 3. So, degree is 3."] },

                // Section C: Short Answer (2 Marks)
                { id: 7, type: 'subjective', section: 'Section C', marks: 2, question: "Find the general solution of the differential equation $\\frac{dy}{dx} = \\frac{1+y^2}{1+x^2}$.", finalAnswer: "$\\tan^{-1} y = \\tan^{-1} x + C$", solutionSteps: ["Separating variables: $\\frac{dy}{1+y^2} = \\frac{dx}{1+x^2}$.", "Integrating both sides: $\\int \\frac{dy}{1+y^2} = \\int \\frac{dx}{1+x^2}$.", "$\\tan^{-1} y = \\tan^{-1} x + C$."] },
                { id: 8, type: 'subjective', section: 'Section C', marks: 2, question: "Find the general solution of the differential equation $\\frac{dy}{dx} + 2y = e^{-x}$.", finalAnswer: "$y = e^{-x} + C e^{-2x}$", solutionSteps: ["Linear DE with $P=2, Q=e^{-x}$.", "I.F. = $e^{\\int 2 dx} = e^{2x}$.", "Solution: $y \\cdot (I.F.) = \\int Q \\cdot (I.F.) dx + C$.", "$y e^{2x} = \\int e^{-x} e^{2x} dx = \\int e^x dx = e^x + C$.", "$y = e^{-x} + C e^{-2x}$."] },

                // Section D: Long Answer (4 Marks)
                { id: 9, type: 'subjective', section: 'Section D', marks: 4, question: "Solve the differential equation $(x^2 - y^2) dx + 2xy dy = 0$.", finalAnswer: "$x^2 + y^2 = Cx$", solutionSteps: ["$\\frac{dy}{dx} = \\frac{y^2 - x^2}{2xy}$. This is a homogeneous DE.", "Put $y = vx \\implies \\frac{dy}{dx} = v + x\\frac{dv}{dx}$.", "$v + x\\frac{dv}{dx} = \\frac{v^2x^2 - x^2}{2x(vx)} = \\frac{v^2-1}{2v}$.", "$x\\frac{dv}{dx} = \\frac{v^2-1}{2v} - v = \\frac{v^2-1-2v^2}{2v} = -\\frac{1+v^2}{2v}$.", "$\\frac{2v}{1+v^2} dv = -\\frac{dx}{x}$. Integrating: $\\log(1+v^2) = -\\log|x| + \\log C$.", "$(1+v^2)x = C \\implies (1+\\frac{y^2}{x^2})x = C \\implies x^2+y^2 = Cx$."] },

                // Section E: Case Study (4 Marks)
                { id: 10, type: 'subjective', section: 'Section E', marks: 4, question: "<strong>Case Study:</strong> In a certain culture of bacteria, the rate of increase is proportional to the number of bacteria present at that instant. It is found that the number of bacteria doubles in 50 years.<br>(i) Form the differential equation representing the growth of bacteria.<br>(ii) If the initial count is $P_0$, find the constant of proportionality $k$.", finalAnswer: "(i) $\\frac{dP}{dt} = kP$, (ii) $k = \\frac{\\log 2}{50}$", solutionSteps: ["(i) Let $P$ be the population at time $t$. Rate of increase $\\frac{dP}{dt} \\propto P \\implies \\frac{dP}{dt} = kP$.", "(ii) $\\frac{dP}{P} = k dt \\implies \\log P = kt + C$.", "At $t=0, P=P_0 \\implies \\log P_0 = C$. So $\\log \\frac{P}{P_0} = kt$.", "At $t=50, P=2P_0$. $\\log \\frac{2P_0}{P_0} = 50k \\implies \\log 2 = 50k$.", "$k = \\frac{\\log 2}{50}$."] }
            ]
        };

        document.addEventListener('DOMContentLoaded', () => {
            new TestEngine(testConfig);
        });
    </script>
</body>
</html>
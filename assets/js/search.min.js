(function(){let i=[],a=!1,n=!1,d;function c(){n||a||(n=!0,fetch("/assets/js/search-index.json").then(e=>e.json()).then(e=>{i=e,a=!0}).catch(e=>{console.warn("Search index failed to load:",e),n=!1}))}document.addEventListener("input",e=>{if(!e.target.matches(".header-search input"))return;const s=e.target,r=s.closest(".header-search");let t=r.querySelector(".search-results");c(),t||(t=document.createElement("div"),t.className="search-results",r.appendChild(t)),clearTimeout(d),d=setTimeout(()=>{const l=s.value.trim().toLowerCase();if(l.length<2){t.style.display="none";return}if(!a){t.innerHTML='<div class="search-message">Loading index...</div>',t.style.display="block";return}const h=i.filter(o=>o.title.toLowerCase().includes(l)||o.tags.some(f=>f.toLowerCase().includes(l)));u(h,t)},300)});function u(e,s){s.innerHTML="",e.length===0?s.innerHTML='<div class="search-message">No results found</div>':e.slice(0,8).forEach(r=>{const t=document.createElement("div");t.className="search-result-item",t.innerHTML=`
                    <a href="${r.url}">
                        <div class="result-title">${r.title}</div>
                        <div class="result-type">${r.category}</div>
                    </a>
                `,s.appendChild(t)}),s.style.display="block"}document.addEventListener("click",e=>{const s=document.querySelector(".header-search");if(s&&!s.contains(e.target)){const r=s.querySelector(".search-results");r&&(r.style.display="none")}}),document.addEventListener("focusin",e=>{e.target.matches(".header-search input")&&c()}),document.addEventListener("mouseover",e=>{e.target.closest(".header-search")&&c()})})();
